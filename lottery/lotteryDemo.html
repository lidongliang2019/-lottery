<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>抽奖页面</title>
</head>
<style>

    .container {
        width: 600px;
        height: 600px;
        display: flex;
        flex-wrap: wrap;
        margin: 200px auto;
        /*border: 1px solid #000000;*/
    }

    .popupContainer {
        position: relative;
        display: none;
        margin: -550px auto;
        width: 600px;
        height: 200px;
        border: 1px solid #000000;
        background-color: rgba(255,255,255,0.9);

    }

    .title {
        width: 100%;
        height: 50px;
        margin-top: 0;
        font-size: 20px;
        line-height: 50px;
        background-color: antiquewhite;
    }

    .btn {
        position: absolute;
        width: 50px;
        height: 30px;
        top: 140px;
        left: 450px;
    }

    .confirm {
        width: 70px;
        height: 30px;
        border: 1px solid #FF9999;
        border-radius: 20px;
        background-color: #FF9999;
    }

    .block {
        width: 33.3%;
        height: 33.3%;
        outline: 1px solid #000000;
        text-align: center;
        line-height: 200px;
        font-size: 24px;
    }

    .block5 {
        background-color: skyblue;
        cursor: pointer;
    }
</style>
<body>
<div class="container">
    <div class="block1 block" id="block1 block">一等奖</div>
    <div class="block2 block" id="block2 block">二等奖</div>
    <div class="block3 block" id="block3 block">三等奖</div>
    <div class="block4 block" id="block4 block">四等奖</div>
    <div class="block5 block" id="btn">点击抽奖</div>
    <div class="block6 block" id="block6 block">五等奖</div>
    <div class="block7 block" id="block7 block">六等奖</div>
    <div class="block8 block" id="block8 block">七等奖</div>
    <div class="block9 block" id="block9 block">谢谢参与</div>
</div>

<div class="popupContainer" id="popupContainer">
    <div class="title">
    <span style="margin-left: 30px">
        信息
    </span>
    </div>
    <div class="content" id="content">
        <im
                id="img"
                src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577102555455&di=17732571df71c4af239407076c2ad6fb&imgtype=0&src=http%3A%2F%2Fbiaoqingba.cn%2Fwp-content%2Fuploads%2F2018%2F09%2Fbd3f8cd699a6823.jpeg"
                style="width: 100px;height: 100px;margin: 20px 50px;"
        >
    </div>
        <div class="btn" id="btnOk">
            <button id="confirm" class="confirm">
                确定
            </button>
        </div>

</div>

<script>
    let block = document.getElementById("block");
    let popupContainer = document.getElementById("popupContainer");
    let blocks = document.getElementsByClassName("block");
    let btnOk= document.getElementById('btnOk');
    let btn = document.getElementById("btn");
    let confirm = document.getElementById("confirm");
    let content = document.getElementById("content");
    let img = document.getElementById("img");
    let arr = [0, 1, 2, 5, 8, 7, 6, 3], i = 0, count = 0, stopTime;
    let rand = Math.floor(Math.random() * 8 + 30);


    let around = function () {
        for (let j = 0; j < arr.length; j++) {
            blocks[arr[j]].style.backgroundColor = '#ffffff';
        }
        blocks[arr[i]].style.backgroundColor = '#660099';
        i++;
        if (i === arr.length) {
            i = 0;
        }
        count++;
        console.log(count);
        if (count === 5 || count === 45) {
            clearInterval(stopTimer);
            stopTimer = setInterval(around, 200);
        }
        if (count === 10 || count === 35) {
            clearInterval(stopTimer);
            stopTimer = setInterval(around, 100);
        }
        if (count === 15) {
            clearInterval(stopTimer);
            stopTimer = setInterval(around, 50);
        }
        if (count === rand) {
            clearInterval(stopTimer);
            popupContainer.style.display = "block";
            if (count%8){
                content.innerHTML = "sorry~ 谢谢参与" ;
                img.src='https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1577102555455&di=17732571df71c4af239407076c2ad6fb&imgtype=0&src=http%3A%2F%2Fbiaoqingba.cn%2Fwp-content%2Fuploads%2F2018%2F09%2Fbd3f8cd699a6823.jpeg';

                btn.style.display = "block";
            }else {
                content.innerHTML = "中奖啦" + arr[index];
            }
        }
    };

    confirm.onclick = function () {
        popupContainer.style.display = "none";

    };

    let start = function () {
        blocks[4].removeEventListener("click", start);
        stopTimer = setInterval(around, 200);
    };

    blocks[4].addEventListener("click", start);
</script>
</body>
</html>